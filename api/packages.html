<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“¦ åŸç‰‡åŒ…ä¿¡æ¯æ¥å£ - åŸç‰‡ç®¡ç†ç³»ç»Ÿ API v4.0</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        .version-badge {
            background: #4CAF50;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 10px;
        }
        
        .nav {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .nav a {
            color: white;
            text-decoration: none;
            margin: 0 15px;
            font-weight: bold;
            transition: opacity 0.3s ease;
            padding: 8px 16px;
            border-radius: 20px;
            background: rgba(255,255,255,0.1);
            display: inline-block;
        }
        
        .nav a:hover {
            opacity: 0.8;
            background: rgba(255,255,255,0.2);
        }
        
        .content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .architecture {
            background: linear-gradient(45deg, #f0f9ff, #e0f2fe);
            border: 1px solid #bae6fd;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .architecture h2 {
            color: #0369a1;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        
        .architecture-layers {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .layer-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-left: 4px solid #0ea5e9;
        }
        
        .layer-card h3 {
            color: #0284c7;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .layer-card p {
            color: #666;
            margin-bottom: 10px;
        }
        
        .layer-features {
            margin-top: 10px;
        }
        
        .layer-feature {
            background: #f0f9ff;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.85rem;
            color: #0369a1;
            margin: 5px;
            display: inline-block;
        }
        
        .api-section {
            margin-bottom: 40px;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 30px;
        }
        
        .api-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .api-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e0e0e0;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .method-badge {
            background: #667eea;
            color: white;
            padding: 8px 16px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1rem;
        }
        
        .endpoint {
            font-family: 'Courier New', monospace;
            font-size: 1.3rem;
            font-weight: bold;
            color: #333;
            word-break: break-all;
        }
        
        .purpose-badge {
            background: #10b981;
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: bold;
            margin-left: auto;
        }
        
        .description {
            color: #666;
            margin-bottom: 20px;
            font-size: 1.1rem;
            line-height: 1.7;
        }
        
        .workflow {
            background: #fef3c7;
            border: 1px solid #fde68a;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .workflow h4 {
            color: #d97706;
            margin-bottom: 15px;
        }
        
        .workflow-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .workflow-step {
            background: white;
            padding: 12px 18px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            flex: 1;
            min-width: 150px;
            text-align: center;
            position: relative;
        }
        
        .workflow-step:not(:last-child)::after {
            content: 'â†’';
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            color: #f59e0b;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .workflow-step-number {
            background: #f59e0b;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 8px;
            font-weight: bold;
            font-size: 0.85rem;
        }
        
        .workflow-step-text {
            font-size: 0.9rem;
            color: #92400e;
        }
        
        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: #f9f9f9;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .param-table th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: bold;
            font-size: 0.95rem;
        }
        
        .param-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e0e0e0;
            vertical-align: top;
        }
        
        .param-table tr:last-child td {
            border-bottom: none;
        }
        
        .param-table tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.3);
        }
        
        .code-block .comment {
            color: #6a9955;
        }
        
        .code-block .string {
            color: #ce9178;
        }
        
        .code-block .number {
            color: #b5cea8;
        }
        
        .code-block .key {
            color: #9cdcfe;
        }
        
        .code-block .boolean {
            color: #569cd6;
        }
        
        .example-tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
            flex-wrap: wrap;
        }
        
        .example-tab {
            padding: 12px 24px;
            cursor: pointer;
            border: none;
            background: none;
            font-weight: bold;
            color: #666;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
        }
        
        .example-tab:hover {
            color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }
        
        .example-tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            background: rgba(102, 126, 234, 0.05);
        }
        
        .example-content {
            display: none;
        }
        
        .example-content.active {
            display: block;
        }
        
        .highlight-box {
            background: #dcfce7;
            border: 1px solid #bbf7d0;
            border-left: 4px solid #22c55e;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .highlight-box h4 {
            color: #16a34a;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .highlight-box ul {
            color: #15803d;
            margin-left: 20px;
        }
        
        .highlight-box li {
            margin-bottom: 8px;
        }
        
        .warning-box {
            background: #fef3c7;
            border: 1px solid #fde68a;
            border-left: 4px solid #f59e0b;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .warning-box h4 {
            color: #d97706;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .warning-box ul {
            color: #92400e;
            margin-left: 20px;
        }
        
        .warning-box li {
            margin-bottom: 8px;
        }
        
        .back-btn {
            display: inline-block;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
            margin-top: 30px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .content {
                padding: 20px;
            }
            
            .api-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .method-badge {
                margin-bottom: 10px;
            }
            
            .purpose-badge {
                margin-left: 0;
                margin-top: 10px;
            }
            
            .workflow-steps {
                flex-direction: column;
            }
            
            .workflow-step:not(:last-child)::after {
                content: 'â†“';
                right: 50%;
                top: auto;
                bottom: -25px;
                transform: translateX(50%);
            }
            
            .architecture-layers {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="version-badge">v4.0</div>
            <h1>ğŸ“¦ åŸç‰‡åŒ…ä¿¡æ¯æ¥å£</h1>
            <p>åˆ†å±‚æ¶æ„è®¾è®¡ Â· ç§»åŠ¨ç«¯å‹å¥½ Â· å®‰å“APPä¸“ç”¨</p>
        </div>
        
        <div class="nav">
            <a href="index.html">ğŸ  é¦–é¡µ</a>
            <a href="auth.html">ğŸ” è®¤è¯æ¥å£</a>
            <a href="racks.html">ğŸ—ï¸ åº“ä½æ¶æ¥å£</a>
            <a href="scan.html">ğŸ“± æ‰«ææ“ä½œæ¥å£</a>
            <a href="apicommon.html">ğŸ”§ å·¥å…·ç±»æ–‡æ¡£</a>
        </div>
        
        <div class="content">
            <!-- æ¶æ„è¯´æ˜ -->
            <div class="architecture">
                <h2>ğŸ—ï¸ åˆ†å±‚æ¶æ„è®¾è®¡</h2>
                <div class="architecture-layers">
                    <div class="layer-card">
                        <h3>ğŸ” 1. å¿«é€Ÿé€‰æ‹©å±‚</h3>
                        <p>å¿«é€Ÿå®šä½ç›®æ ‡åŸç‰‡ç±»å‹ï¼Œç”¨äºé€‰æ‹©å™¨åŠŸèƒ½</p>
                        <div class="layer-features">
                            <span class="layer-feature">æ¨¡ç³Šæœç´¢</span>
                            <span class="layer-feature">ä¸‰è”åŠ¨ç­›é€‰</span>
                            <span class="layer-feature">è½»é‡çº§è¿”å›</span>
                        </div>
                    </div>
                    <div class="layer-card">
                        <h3>ğŸ“Š 2. è¯¦æƒ…åˆ†æå±‚</h3>
                        <p>æŸ¥çœ‹åŸç‰‡çš„å®Œæ•´åº“å­˜æƒ…å†µå’Œåˆ†å¸ƒè¯¦æƒ…</p>
                        <div class="layer-features">
                            <span class="layer-feature">åº“å­˜ç»Ÿè®¡</span>
                            <span class="layer-feature">åº“ä½åˆ†å¸ƒ</span>
                            <span class="layer-feature">æ•°æ®åˆ†æ</span>
                        </div>
                    </div>
                    <div class="layer-card">
                        <h3>ğŸ“¦ 3. åŸºç¡€æŸ¥è¯¢å±‚</h3>
                        <p>æ—¥å¸¸åº“å­˜æŸ¥çœ‹ï¼Œä¿æŒå‘åå…¼å®¹æ€§</p>
                        <div class="layer-features">
                            <span class="layer-feature">åŒ…ä¿¡æ¯åˆ—è¡¨</span>
                            <span class="layer-feature">å¤šæ¡ä»¶ç­›é€‰</span>
                            <span class="layer-feature">åˆ†é¡µæŸ¥è¯¢</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- æ¨èå·¥ä½œæµç¨‹ -->
            <div class="workflow">
                <h4>ğŸ¯ å®‰å“APPæ¨èè°ƒç”¨æµç¨‹</h4>
                <div class="workflow-steps">
                    <div class="workflow-step">
                        <div class="workflow-step-number">1</div>
                        <div class="workflow-step-text">æ¨¡ç³Šæœç´¢<br>æˆ–ä¸‰è”åŠ¨</div>
                    </div>
                    <div class="workflow-step">
                        <div class="workflow-step-number">2</div>
                        <div class="workflow-step-text">è·å–glass_type_id</div>
                    </div>
                    <div class="workflow-step">
                        <div class="workflow-step-number">3</div>
                        <div class="workflow-step-text">æŸ¥çœ‹è¯¦æƒ…<br>åˆ†å¸ƒä¿¡æ¯</div>
                    </div>
                    <div class="workflow-step">
                        <div class="workflow-step-number">4</div>
                        <div class="workflow-step-text">è·å–å…·ä½“<br>åŒ…åˆ—è¡¨</div>
                    </div>
                </div>
            </div>
            
            <!-- æ¥å£1: åŸºç¡€æŸ¥è¯¢ -->
            <div class="api-section">
                <div class="api-header">
                    <span class="method-badge">GET</span>
                    <span class="endpoint">/api/packages.php</span>
                    <span class="purpose-badge">åŸºç¡€æŸ¥è¯¢</span>
                </div>
                
                <div class="description">
                    è·å–åŸç‰‡åŒ…ä¿¡æ¯åˆ—è¡¨ï¼Œæ”¯æŒå¤šç§æŸ¥è¯¢æ¡ä»¶å’Œåˆ†é¡µåŠŸèƒ½ã€‚æ—¥å¸¸åº“å­˜æŸ¥çœ‹çš„ä¸»è¦æ¥å£ï¼Œä¿æŒå‘åå…¼å®¹æ€§ã€‚æ”¯æŒåŒ…å·æ¨¡ç³ŠæŸ¥è¯¢ã€åŸç‰‡ç±»å‹ç­›é€‰ã€è´§æ¶ä½ç½®æŸ¥è¯¢ã€åŸºåœ°ç­›é€‰å’ŒçŠ¶æ€è¿‡æ»¤ã€‚
                </div>
                
                <h3>æŸ¥è¯¢å‚æ•°</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>å‚æ•°å</th>
                            <th>ç±»å‹</th>
                            <th>å¿…å¡«</th>
                            <th>æè¿°</th>
                            <th>ç¤ºä¾‹</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>package_code</td>
                            <td>string</td>
                            <td>å¦</td>
                            <td>åŒ…ç¼–å·æ¨¡ç³ŠæŸ¥è¯¢</td>
                            <td>YP2024</td>
                        </tr>
                        <tr>
                            <td>glass_type_id</td>
                            <td>int</td>
                            <td>å¦</td>
                            <td>åŸç‰‡ç±»å‹IDç²¾ç¡®æŸ¥è¯¢</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>rack_id</td>
                            <td>int</td>
                            <td>å¦</td>
                            <td>è´§æ¶IDç²¾ç¡®æŸ¥è¯¢</td>
                            <td>5</td>
                        </tr>
                        <tr>
                            <td>base_id</td>
                            <td>int</td>
                            <td>å¦</td>
                            <td>åŸºåœ°IDç²¾ç¡®æŸ¥è¯¢</td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td>status</td>
                            <td>string</td>
                            <td>å¦</td>
                            <td>çŠ¶æ€æŸ¥è¯¢<br>å¯é€‰å€¼: in_storage, in_processing, scrapped, used_up</td>
                            <td>in_storage</td>
                        </tr>
                        <tr>
                            <td>page</td>
                            <td>int</td>
                            <td>å¦</td>
                            <td>é¡µç ï¼Œé»˜è®¤1</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>page_size</td>
                            <td>int</td>
                            <td>å¦</td>
                            <td>æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20ï¼Œæœ€å¤§100</td>
                            <td>20</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>è¯·æ±‚ç¤ºä¾‹</h3>
                <div class="example-tabs">
                    <button class="example-tab active" onclick="showExample('basic-js')">JavaScript</button>
                    <button class="example-tab" onclick="showExample('basic-python')">Python</button>
                    <button class="example-tab" onclick="showExample('basic-curl')">cURL</button>
                </div>
                
                <div id="basic-js-example" class="example-content active">
                    <div class="code-block">
<span class="comment">// è¯·æ±‚å¤´</span><br>
Authorization: Bearer your-token-here<br>
<br>
<span class="comment">// åŸºç¡€æŸ¥è¯¢</span><br>
GET /api/packages.php?page=1&page_size=10<br>
<br>
<span class="comment">// æŒ‰åŒ…å·æŸ¥è¯¢</span><br>
GET /api/packages.php?package_code=YP2024&page=1&page_size=10<br>
<br>
<span class="comment">// æŒ‰çŠ¶æ€æŸ¥è¯¢</span><br>
GET /api/packages.php?status=in_storage&page=1&page_size=20
                    </div>
                </div>
                
                <div id="basic-python-example" class="example-content">
                    <div class="code-block">
<span class="comment"># åŸºç¡€æŸ¥è¯¢</span><br>
import requests<br>
<br>
def get_packages(token, **params):<br>
    headers = {'Authorization': f'Bearer {token}'}<br>
    response = requests.get(<br>
        'http://your-domain.com/api/packages.php',<br>
        headers=headers,<br>
        params=params<br>
    )<br>
    return response.json()<br>
<br>
<span class="comment"># ä½¿ç”¨ç¤ºä¾‹</span><br>
result = get_packages(token, package_code='YP2024', page=1, page_size=10)
                    </div>
                </div>
                
                <div id="basic-curl-example" class="example-content">
                    <div class="code-block">
<span class="comment"># åŸºç¡€æŸ¥è¯¢</span><br>
curl -X GET \<br>
  -H "Authorization: Bearer your-token-here" \<br>
  "http://your-domain.com/api/packages.php?page=1&page_size=10"<br>
<br>
<span class="comment"># æŒ‰åŒ…å·æŸ¥è¯¢</span><br>
curl -X GET \<br>
  -H "Authorization: Bearer your-token-here" \<br>
  "http://your-domain.com/api/packages.php?package_code=YP2024&page=1&page_size=10"
                    </div>
                </div>
            </div>
            
            <!-- æ¥å£2: æ¨¡ç³Šæœç´¢é€‰æ‹©å™¨ -->
            <div class="api-section">
                <div class="api-header">
                    <span class="method-badge">GET</span>
                    <span class="endpoint">/api/packages.php?action=fuzzy_search</span>
                    <span class="purpose-badge">å¿«é€Ÿé€‰æ‹©</span>
                </div>
                
                <div class="description">
                    å¿«é€Ÿæœç´¢åŸç‰‡ç±»å‹ï¼Œç”¨äºé€‰æ‹©å™¨åŠŸèƒ½ã€‚è¿”å›è½»é‡çº§æ ¼å¼ï¼Œçªå‡ºé€‰æ‹©ä¿¡æ¯ï¼Œä¾¿äºå®‰å“APPæ„å»ºæœç´¢ç•Œé¢ã€‚æ”¯æŒæŒ‰å¤šä¸ªå­—æ®µæœç´¢ï¼Œæ™ºèƒ½æ’åºä¼˜åŒ–æœç´¢ç»“æœã€‚
                </div>
                
                <div class="highlight-box">
                    <h4>ğŸ¯ é€‰æ‹©å™¨ç‰¹è‰²</h4>
                    <ul>
                        <li><strong>è½»é‡çº§è¿”å›</strong>ï¼šselection_options ä¸“æ³¨äºé€‰æ‹©ä¿¡æ¯</li>
                        <li><strong>æ˜¾ç¤ºä¼˜åŒ–</strong>ï¼šdisplay_name åŒ…å«IDï¼Œä¾¿äºç•Œé¢æ˜¾ç¤º</li>
                        <li><strong>åº“å­˜æ ‡è¯†</strong>ï¼šhas_inventory å¿«é€Ÿåˆ¤æ–­æ˜¯å¦æœ‰è´§</li>
                        <li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé»˜è®¤é¡µé¢å¤§å°10æ¡ï¼Œé€‚åˆç§»åŠ¨ç«¯</li>
                    </ul>
                </div>
                
                <h3>æŸ¥è¯¢å‚æ•°</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>å‚æ•°å</th>
                            <th>ç±»å‹</th>
                            <th>å¿…å¡«</th>
                            <th>æè¿°</th>
                            <th>ç¤ºä¾‹</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>action</td>
                            <td>string</td>
                            <td>æ˜¯</td>
                            <td>å›ºå®šå€¼ï¼šfuzzy_search</td>
                            <td>fuzzy_search</td>
                        </tr>
                        <tr>
                            <td>keyword</td>
                            <td>string</td>
                            <td>æ˜¯</td>
                            <td>æœç´¢å…³é”®è¯ï¼Œé•¿åº¦è‡³å°‘1ä¸ªå­—ç¬¦</td>
                            <td>æµ®æ³•</td>
                        </tr>
                        <tr>
                            <td>fields</td>
                            <td>string</td>
                            <td>å¦</td>
                            <td>æœç´¢å­—æ®µï¼Œé€—å·åˆ†éš”<br>é»˜è®¤: name,custom_id,brand,manufacturer</td>
                            <td>name,brand</td>
                        </tr>
                        <tr>
                            <td>page</td>
                            <td>int</td>
                            <td>å¦</td>
                            <td>é¡µç ï¼Œé»˜è®¤1</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>page_size</td>
                            <td>int</td>
                            <td>å¦</td>
                            <td>æ¯é¡µæ•°é‡ï¼Œé»˜è®¤10ï¼Œæœ€å¤§50</td>
                            <td>10</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>è¯·æ±‚ç¤ºä¾‹</h3>
                <div class="example-tabs">
                    <button class="example-tab active" onclick="showExample('fuzzy-js')">JavaScript</button>
                    <button class="example-tab" onclick="showExample('fuzzy-python')">Python</button>
                    <button class="example-tab" onclick="showExample('fuzzy-curl')">cURL</button>
                </div>
                
                <div id="fuzzy-js-example" class="example-content active">
                    <div class="code-block">
<span class="comment">// æ¨¡ç³Šæœç´¢ - å¿«é€Ÿé€‰æ‹©å™¨</span><br>
async function searchGlassTypes(keyword) {<br>
    const response = await fetch(<br>
        `/api/packages.php?action=fuzzy_search&keyword=${keyword}&page_size=10`,<br>
        {<br>
            headers: { 'Authorization': 'Bearer ' + token }<br>
        }<br>
    );<br>
    <br>
    const data = await response.json();<br>
    if (data.code === 200) {<br>
        <span class="comment">// è¿”å› selection_options æ•°ç»„</span><br>
        return data.data.selection_options;<br>
    }<br>
    throw new Error(data.message);<br>
}<br>
<br>
<span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span><br>
const options = await searchGlassTypes('æµ®æ³•');<br>
options.forEach(option => {<br>
    console.log(`${option.display_name} - åº“å­˜:${option.total_packages}åŒ…`);<br>
});
                    </div>
                </div>
                
                <div id="fuzzy-python-example" class="example-content">
                    <div class="code-block">
<span class="comment"># æ¨¡ç³Šæœç´¢ - å¿«é€Ÿé€‰æ‹©å™¨</span><br>
import requests<br>
<br>
def search_glass_types(token, keyword):<br>
    headers = {'Authorization': f'Bearer {token}'}<br>
    params = {<br>
        'action': 'fuzzy_search',<br>
        'keyword': keyword,<br>
        'page_size': 10<br>
    }<br>
    <br>
    response = requests.get(<br>
        'http://your-domain.com/api/packages.php',<br>
        headers=headers,<br>
        params=params<br>
    )<br>
    data = response.json()<br>
    <br>
    if data['code'] == 200:<br>
        <span class="comment"># è¿”å› selection_options åˆ—è¡¨</span><br>
        return data['data']['selection_options']<br>
    raise Exception(data['message'])<br>
<br>
<span class="comment"># ä½¿ç”¨ç¤ºä¾‹</span><br>
options = search_glass_types(token, 'æµ®æ³•')<br>
for option in options:<br>
    print(f"{option['display_name']} - åº“å­˜:{option['total_packages']}åŒ…")
                    </div>
                </div>
                
                <div id="fuzzy-curl-example" class="example-content">
                    <div class="code-block">
<span class="comment"># æ¨¡ç³Šæœç´¢</span><br>
curl -X GET \<br>
  -H "Authorization: Bearer your-token-here" \<br>
  "http://your-domain.com/api/packages.php?action=fuzzy_search&keyword=æµ®æ³•&page_size=10"<br>
<br>
<span class="comment"># æŒ‰å“ç‰Œæœç´¢</span><br>
curl -X GET \<br>
  -H "Authorization: Bearer your-token-here" \<br>
  "http://your-domain.com/api/packages.php?action=fuzzy_search&keyword=ä¿¡ä¹‰&fields=brand,manufacturer"
                    </div>
                </div>
            </div>
            
            <!-- æ¥å£3: ä¸‰è”åŠ¨çº§è”é€‰æ‹©å™¨ -->
            <div class="api-section">
                <div class="api-header">
                    <span class="method-badge">GET</span>
                    <span class="endpoint">/api/packages.php?action=get_dropdown_options</span>
                    <span class="purpose-badge">å¿«é€Ÿé€‰æ‹©</span>
                </div>
                
                <div class="description">
                    æä¾›åšåº¦ã€é¢œè‰²ã€å“ç‰Œçš„ä¸‰çº§è”åŠ¨ç­›é€‰ï¼Œç”¨äºé€æ­¥ç¼©å°åŸç‰‡ç±»å‹é€‰æ‹©èŒƒå›´ã€‚æ”¯æŒä¸¤ç§å·¥ä½œæ¨¡å¼ï¼šè”åŠ¨æ›´æ–°æ¨¡å¼ï¼ˆè½»é‡çº§æ•°æ®ï¼‰å’Œæœç´¢æäº¤æ¨¡å¼ï¼ˆå®Œæ•´ç»“æœåˆ—è¡¨ï¼‰ï¼Œä¼˜åŒ–æ•°æ®ä¼ è¾“æ•ˆç‡ã€‚
                </div>
                
                <div class="highlight-box">
                    <h4>ğŸ”— çº§è”ç‰¹è‰²</h4>
                    <ul>
                        <li><strong>æ™ºèƒ½çº§è”</strong>ï¼šé€‰æ‹©ä¸€é¡¹è‡ªåŠ¨åˆ·æ–°å…¶ä»–é¡¹çš„å¯ç”¨é€‰é¡¹</li>
                        <li><strong>è¿›åº¦æ˜¾ç¤º</strong>ï¼šfilter_progress æ˜¾ç¤ºç­›é€‰å®Œæˆåº¦</li>
                        <li><strong>æ­¥éª¤å¼•å¯¼</strong>ï¼šnext_step æŒ‡å¯¼ç”¨æˆ·ä¸‹ä¸€æ­¥æ“ä½œ</li>
                        <li><strong>ç•Œé¢å‹å¥½</strong>ï¼šavailable_options æä¾›æ ‡ç­¾æ ¼å¼çš„é€‰é¡¹</li>
                    </ul>
                </div>
                
                <h3>æŸ¥è¯¢å‚æ•°</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>å‚æ•°å</th>
                            <th>ç±»å‹</th>
                            <th>å¿…å¡«</th>
                            <th>æè¿°</th>
                            <th>ç¤ºä¾‹</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>action</td>
                            <td>string</td>
                            <td>æ˜¯</td>
                            <td>å›ºå®šå€¼ï¼šget_dropdown_options</td>
                            <td>get_dropdown_options</td>
                        </tr>
                        <tr>
                            <td>thickness</td>
                            <td>float</td>
                            <td>å¦</td>
                            <td>åšåº¦(mm)</td>
                            <td>5.0</td>
                        </tr>
                        <tr>
                            <td>color</td>
                            <td>string</td>
                            <td>å¦</td>
                            <td>é¢œè‰²</td>
                            <td>é€æ˜</td>
                        </tr>
                        <tr>
                            <td>brand</td>
                            <td>string</td>
                            <td>å¦</td>
                            <td>å“ç‰Œ</td>
                            <td>ä¿¡ä¹‰</td>
                        </tr>
                        <tr>
                            <td>submit</td>
                            <td>boolean</td>
                            <td>å¦</td>
                            <td>æ˜¯å¦æäº¤æœç´¢ï¼Œé»˜è®¤falseï¼ˆè”åŠ¨æ¨¡å¼ï¼‰</td>
                            <td>true/false</td>
                        </tr>
                        <tr>
                            <td>base_all</td>
                            <td>boolean</td>
                            <td>å¦</td>
                            <td>æ˜¯å¦æŸ¥è¯¢æ‰€æœ‰åŸºåœ°ï¼Œé»˜è®¤false</td>
                            <td>true</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>å·¥ä½œæ¨¡å¼è¯´æ˜</h3>
                <div class="mode-description">
                    <div class="mode-box">
                        <h4>ğŸ”— è”åŠ¨æ›´æ–°æ¨¡å¼ï¼ˆsubmit=falseï¼Œé»˜è®¤ï¼‰</h4>
                        <ul>
                            <li><strong>ç”¨é€”</strong>ï¼šä¸‹æ‹‰æ¡†é€‰æ‹©å˜åŒ–æ—¶è‡ªåŠ¨æ›´æ–°å¯ç”¨é€‰é¡¹</li>
                            <li><strong>ç‰¹ç‚¹</strong>ï¼šè½»é‡çº§æ•°æ®ï¼Œä»…è¿”å›çº§è”é€‰é¡¹ä¿¡æ¯</li>
                            <li><strong>è§¦å‘æ—¶æœº</strong>ï¼šæ¯æ¬¡ç­›é€‰æ¡ä»¶å˜åŒ–æ—¶è‡ªåŠ¨è°ƒç”¨</li>
                        </ul>
                    </div>
                    <div class="mode-box">
                        <h4>ğŸ” æœç´¢æäº¤æ¨¡å¼ï¼ˆsubmit=trueï¼‰</h4>
                        <ul>
                            <li><strong>ç”¨é€”</strong>ï¼šç”¨æˆ·ç¡®è®¤ç­›é€‰æ¡ä»¶åè·å–å®Œæ•´ç»“æœåˆ—è¡¨</li>
                            <li><strong>ç‰¹ç‚¹</strong>ï¼šè¿”å›å®Œæ•´çš„ç­›é€‰ç»“æœåˆ—è¡¨ï¼Œæ ¼å¼ä¸æ¨¡ç³Šæœç´¢ä¸€è‡´</li>
                            <li><strong>è§¦å‘æ—¶æœº</strong>ï¼šç”¨æˆ·ç‚¹å‡»æœç´¢æŒ‰é’®æ—¶æ‰‹åŠ¨è°ƒç”¨</li>
                        </ul>
                    </div>
                </div>
                
                <h3>å…¸å‹ä½¿ç”¨æµç¨‹</h3>
                <div class="example-tabs">
                    <button class="example-tab active" onclick="showExample('dropdown-js')">JavaScript</button>
                    <button class="example-tab" onclick="showExample('dropdown-python')">Python</button>
                    <button class="example-tab" onclick="showExample('dropdown-curl')">cURL</button>
                </div>
                
                <div id="dropdown-js-example" class="example-content active">
                    <div class="code-block">
<span class="comment">// ä¸‰è”åŠ¨çº§è”é€‰æ‹©å™¨</span><br>
async function getDropdownOptions(filters = {}) {<br>
    const params = new URLSearchParams({<br>
        action: 'get_dropdown_options',<br>
        ...filters<br>
    });<br>
    <br>
    const response = await fetch(<br>
        `/api/packages.php?${params}`,<br>
        { headers: { 'Authorization': 'Bearer ' + token } }<br>
    );<br>
    <br>
    const data = await response.json();<br>
    if (data.code === 200) {<br>
        return data.data;<br>
    }<br>
    throw new Error(data.message);<br>
}<br>
<br>
<span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span><br>
<span class="comment">// 1. è·å–åˆå§‹é€‰é¡¹</span><br>
const step1 = await getDropdownOptions();<br>
console.log('å¯ç”¨åšåº¦:', step1.available_options.thicknesses);<br>
<br>
<span class="comment">// 2. é€‰æ‹©åšåº¦åè·å–é¢œè‰²é€‰é¡¹</span><br>
const step2 = await getDropdownOptions({ thickness: 5.0 });<br>
console.log('å¯ç”¨é¢œè‰²:', step2.available_options.colors);<br>
<br>
<span class="comment">// 3. å®Œæ•´ç­›é€‰è·å–åŸç‰‡åˆ—è¡¨</span><br>
const step3 = await getDropdownOptions({<br>
    thickness: 5.0,<br>
    color: 'é€æ˜',<br>
    brand: 'ä¿¡ä¹‰'<br>
});<br>
console.log('å¯é€‰åŸç‰‡:', step3.glass_types);
                    </div>
                </div>
                
                <div id="dropdown-python-example" class="example-content">
                    <div class="code-block">
<span class="comment"># ä¸‰è”åŠ¨çº§è”é€‰æ‹©å™¨</span><br>
import requests<br>
<br>
def get_dropdown_options(token, **filters):<br>
    headers = {'Authorization': f'Bearer {token}'}<br>
    params = {'action': 'get_dropdown_options', **filters}<br>
    <br>
    response = requests.get(<br>
        'http://your-domain.com/api/packages.php',<br>
        headers=headers,<br>
        params=params<br>
    )<br>
    data = response.json()<br>
    <br>
    if data['code'] == 200:<br>
        return data['data']<br>
    raise Exception(data['message'])<br>
<br>
<span class="comment"># ä½¿ç”¨ç¤ºä¾‹</span><br>
<span class="comment"># 1. è·å–åˆå§‹é€‰é¡¹</span><br>
step1 = get_dropdown_options(token)<br>
print('å¯ç”¨åšåº¦:', step1['available_options']['thicknesses'])<br>
<br>
<span class="comment"># 2. é€‰æ‹©åšåº¦åè·å–é¢œè‰²é€‰é¡¹</span><br>
step2 = get_dropdown_options(token, thickness=5.0)<br>
print('å¯ç”¨é¢œè‰²:', step2['available_options']['colors'])<br>
<br>
<span class="comment"># 3. å®Œæ•´ç­›é€‰è·å–åŸç‰‡åˆ—è¡¨</span><br>
step3 = get_dropdown_options(token, thickness=5.0, color='é€æ˜', brand='ä¿¡ä¹‰')<br>
print('å¯é€‰åŸç‰‡:', step3['glass_types'])
                    </div>
                </div>
                
                <div id="dropdown-curl-example" class="example-content">
                    <div class="code-block">
<span class="comment"># è·å–æ‰€æœ‰åšåº¦é€‰é¡¹</span><br>
curl -X GET \<br>
  -H "Authorization: Bearer your-token-here" \<br>
  "http://your-domain.com/api/packages.php?action=get_dropdown_options"<br>
<br>
<span class="comment"># é€‰æ‹©5mmåè·å–é¢œè‰²é€‰é¡¹</span><br>
curl -X GET \<br>
  -H "Authorization: Bearer your-token-here" \<br>
  "http://your-domain.com/api/packages.php?action=get_dropdown_options&thickness=5.0"<br>
<br>
<span class="comment"># å®Œæ•´ç­›é€‰</span><br>
curl -X GET \<br>
  -H "Authorization: Bearer your-token-here" \<br>
  "http://your-domain.com/api/packages.php?action=get_dropdown_options&thickness=5.0&color=é€æ˜&brand=ä¿¡ä¹‰"
                    </div>
                </div>
            </div>
            
            <!-- æ¥å£4: è¯¦æƒ…åˆ†æ -->
            <div class="api-section">
                <div class="api-header">
                    <span class="method-badge">GET</span>
                    <span class="endpoint">/api/packages.php?action=glass_type_summary</span>
                    <span class="purpose-badge">è¯¦æƒ…åˆ†æ</span>
                </div>
                
                <div class="description">
                    æ ¹æ®é€‰ä¸­çš„åŸç‰‡ç±»å‹IDï¼Œè·å–è¯¦ç»†åº“å­˜ç»Ÿè®¡å’Œåº“ä½åˆ†å¸ƒä¿¡æ¯ã€‚åˆ†æå±‚çš„ä¸»è¦æ¥å£ï¼Œæä¾›å®Œæ•´çš„æ•°æ®æ´å¯Ÿï¼Œæ”¯æŒåŸºåœ°æƒé™è¿‡æ»¤ï¼Œè¿”å›æŒ‰åŸºåœ°åˆ†ç»„çš„åº“ä½åˆ†å¸ƒè¯¦æƒ…ã€‚
                </div>
                
                <div class="warning-box">
                    <h4>âš ï¸ é‡è¦è¯´æ˜</h4>
                    <ul>
                        <li><strong>åªæ¥å—glass_type_id</strong>ï¼šç»Ÿä¸€ä½¿ç”¨IDå‚æ•°ï¼Œä¸åŒ…å«nameæ¨¡ç³Šæœç´¢</li>
                        <li><strong>æ•°æ®è¯¦ç»†</strong>ï¼šè¿”å›å®Œæ•´çš„åº“å­˜ç»Ÿè®¡å’ŒæŒ‰åŸºåœ°åˆ†ç»„çš„åº“ä½åˆ†å¸ƒ</li>
                        <li><strong>åˆ†æå‹å¥½</strong>ï¼šé€‚åˆæ•°æ®åˆ†æå’ŒæŠ¥è¡¨ç”Ÿæˆ</li>
                    </ul>
                </div>
                
                <h3>æŸ¥è¯¢å‚æ•°</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>å‚æ•°å</th>
                            <th>ç±»å‹</th>
                            <th>å¿…å¡«</th>
                            <th>æè¿°</th>
                            <th>ç¤ºä¾‹</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>action</td>
                            <td>string</td>
                            <td>æ˜¯</td>
                            <td>å›ºå®šå€¼ï¼šglass_type_summary</td>
                            <td>glass_type_summary</td>
                        </tr>
                        <tr>
                            <td>glass_type_id</td>
                            <td>int</td>
                            <td>æ˜¯</td>
                            <td>åŸç‰‡ç±»å‹ID</td>
                            <td>1</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>è¯·æ±‚ç¤ºä¾‹</h3>
                <div class="example-tabs">
                    <button class="example-tab active" onclick="showExample('summary-js')">JavaScript</button>
                    <button class="example-tab" onclick="showExample('summary-python')">Python</button>
                    <button class="example-tab" onclick="showExample('summary-curl')">cURL</button>
                </div>
                
                <div id="summary-js-example" class="example-content active">
                    <div class="code-block">
<span class="comment">// è¯¦æƒ…åˆ†æ - æ ¹æ®glass_type_id</span><br>
async function getGlassTypeSummary(glassTypeId) {<br>
    const response = await fetch(<br>
        `/api/packages.php?action=glass_type_summary&glass_type_id=${glassTypeId}`,<br>
        { headers: { 'Authorization': 'Bearer ' + token } }<br>
    );<br>
    <br>
    const data = await response.json();<br>
    if (data.code === 200) {<br>
        return data.data;<br>
    }<br>
    throw new Error(data.message);<br>
}<br>
<br>
<span class="comment">// å…¸å‹è°ƒç”¨ï¼šä»æœç´¢ç»“æœè·å–è¯¦æƒ…</span><br>
const searchResults = await searchGlassTypes('æµ®æ³•');<br>
if (searchResults.length > 0) {<br>
    const selectedId = searchResults[0].id;  <span class="comment">// é€‰æ‹©ç¬¬ä¸€ä¸ª</span><br>
    const summary = await getGlassTypeSummary(selectedId);<br>
    <br>
    console.log(`åŸç‰‡ç±»å‹: ${summary.glass_type.name}`);<br>
    console.log(`æ€»åŒ…æ•°: ${summary.inventory_summary.total_packages}`);<br>
    console.log(`æ¶‰åŠåŸºåœ°: ${summary.inventory_summary.bases_involved}`);<br>
    <br>
    <span class="comment">// æ˜¾ç¤ºåº“ä½åˆ†å¸ƒ</span><br>
    summary.base_distribution.forEach(base => {<br>
        console.log(`${base.base_name}: ${base.total_packages}åŒ…`);<br>
    });<br>
}
                    </div>
                </div>
                
                <div id="summary-python-example" class="example-content">
                    <div class="code-block">
<span class="comment"># è¯¦æƒ…åˆ†æ - æ ¹æ®glass_type_id</span><br>
import requests<br>
<br>
def get_glass_type_summary(token, glass_type_id):<br>
    headers = {'Authorization': f'Bearer {token}'}<br>
    params = {<br>
        'action': 'glass_type_summary',<br>
        'glass_type_id': glass_type_id<br>
    }<br>
    <br>
    response = requests.get(<br>
        'http://your-domain.com/api/packages.php',<br>
        headers=headers,<br>
        params=params<br>
    )<br>
    data = response.json()<br>
    <br>
    if data['code'] == 200:<br>
        return data['data']<br>
    raise Exception(data['message'])<br>
<br>
<span class="comment"># å…¸å‹è°ƒç”¨ï¼šä»æœç´¢ç»“æœè·å–è¯¦æƒ…</span><br>
search_results = search_glass_types(token, 'æµ®æ³•')<br>
if search_results:<br>
    selected_id = search_results[0]['id']  <span class="comment"># é€‰æ‹©ç¬¬ä¸€ä¸ª</span><br>
    summary = get_glass_type_summary(token, selected_id)<br>
    <br>
    print(f"åŸç‰‡ç±»å‹: {summary['glass_type']['name']}")<br>
    print(f"æ€»åŒ…æ•°: {summary['inventory_summary']['total_packages']}")<br>
    print(f"æ¶‰åŠåŸºåœ°: {summary['inventory_summary']['bases_involved']}")<br>
    <br>
    <span class="comment"># æ˜¾ç¤ºåº“ä½åˆ†å¸ƒ</span><br>
    for base in summary['base_distribution']:<br>
        print(f"{base['base_name']}: {base['total_packages']}åŒ…")
                    </div>
                </div>
                
                <div id="summary-curl-example" class="example-content">
                    <div class="code-block">
<span class="comment"># æŸ¥çœ‹åŸç‰‡ç±»å‹è¯¦æƒ…</span><br>
curl -X GET \<br>
  -H "Authorization: Bearer your-token-here" \<br>
  "http://your-domain.com/api/packages.php?action=glass_type_summary&glass_type_id=1"<br>
<br>
<span class="comment"># é”™è¯¯æµ‹è¯•(æ— æ•ˆID)</span><br>
curl -X GET \<br>
  -H "Authorization: Bearer your-token-here" \<br>
  "http://your-domain.com/api/packages.php?action=glass_type_summary&glass_type_id=999"
                    </div>
                </div>
            </div>
            
            <!-- é”™è¯¯ç è¯´æ˜ -->
            <div class="api-section">
                <h3>âš ï¸ é”™è¯¯ç è¯´æ˜</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>é”™è¯¯ç </th>
                            <th>é”™è¯¯ä¿¡æ¯</th>
                            <th>åŸå› </th>
                            <th>è§£å†³æ–¹æ¡ˆ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>200</td>
                            <td>æ“ä½œæˆåŠŸ</td>
                            <td>-</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>400</td>
                            <td>è¯·æ±‚å‚æ•°é”™è¯¯</td>
                            <td>å‚æ•°ç¼ºå¤±æˆ–æ ¼å¼é”™è¯¯</td>
                            <td>æ£€æŸ¥å‚æ•°æ ¼å¼å’Œå¿…å¡«é¡¹</td>
                        </tr>
                        <tr>
                            <td>401</td>
                            <td>è®¤è¯å¤±è´¥</td>
                            <td>Tokenæ— æ•ˆæˆ–è¿‡æœŸ</td>
                            <td>é‡æ–°ç™»å½•è·å–æ–°Token</td>
                        </tr>
                        <tr>
                            <td>404</td>
                            <td>æœªæ‰¾åˆ°æ•°æ®</td>
                            <td>æŸ¥è¯¢æ¡ä»¶æ— ç»“æœ</td>
                            <td>æ£€æŸ¥glass_type_idç­‰å‚æ•°</td>
                        </tr>
                        <tr>
                            <td>405</td>
                            <td>æ–¹æ³•ä¸å…è®¸</td>
                            <td>ä½¿ç”¨äº†éGETæ–¹æ³•</td>
                            <td>ä½¿ç”¨GETæ–¹æ³•</td>
                        </tr>
                        <tr>
                            <td>500</td>
                            <td>æœåŠ¡å™¨é”™è¯¯</td>
                            <td>æ•°æ®åº“æŸ¥è¯¢å¤±è´¥</td>
                            <td>è”ç³»ç³»ç»Ÿç®¡ç†å‘˜</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <a href="index.html" class="back-btn">â† è¿”å›é¦–é¡µ</a>
        </div>
    </div>
    
    <script>
        function showExample(lang) {
            // éšè—æ‰€æœ‰ç¤ºä¾‹å†…å®¹
            document.querySelectorAll('.example-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„activeç±»
            document.querySelectorAll('.example-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // æ˜¾ç¤ºé€‰ä¸­çš„ç¤ºä¾‹å†…å®¹
            document.getElementById(lang + '-example').classList.add('active');
            
            // ä¸ºé€‰ä¸­çš„æ ‡ç­¾æ·»åŠ activeç±»
            event.target.classList.add('active');
        }
    </script>
</body>
</html>