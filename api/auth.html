<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è®¤è¯ API æ–‡æ¡£</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .nav {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .nav a {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            margin: 0 8px;
            transition: all 0.3s ease;
            border: 2px solid rgba(255,255,255,0.3);
        }
        
        .nav a:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .content {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }
        
        .section {
            margin-bottom: 50px;
        }
        
        .section h2 {
            color: #667eea;
            margin-bottom: 25px;
            border-bottom: 3px solid #f0f0f0;
            padding-bottom: 15px;
            font-size: 1.8rem;
        }
        
        .section h3 {
            color: #555;
            margin: 30px 0 20px 0;
            font-size: 1.4rem;
        }
        
        .section h4 {
            color: #666;
            margin: 20px 0 10px 0;
            font-size: 1.2rem;
        }
        
        .info-box {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .success-box {
            background: linear-gradient(135deg, #e8f5e8 0%, #d4edda 100%);
            border-left: 4px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .warning-box {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeeba 100%);
            border-left: 4px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .error-box {
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
            border-left: 4px solid #dc3545;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            border-radius: 8px;
            padding: 25px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .json-block {
            background: #1a202c;
            color: #68d391;
            border-radius: 8px;
            padding: 25px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .param-table th, .param-table td {
            border: 1px solid #e2e8f0;
            padding: 15px;
            text-align: left;
        }
        
        .param-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
        }
        
        .param-table tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        .param-table tr:hover {
            background: #e3f2fd;
        }
        
        .endpoint {
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }
        
        .endpoint-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .method {
            background: #28a745;
            color: white;
            padding: 5px 12px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.8rem;
            margin-right: 10px;
        }
        
        .method.get { background: #007bff; }
        .method.post { background: #28a745; }
        .method.put { background: #ffc107; color: #333; }
        .method.delete { background: #dc3545; }
        
        .url {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            background: #f8f9fa;
            padding: 8px 15px;
            border-radius: 4px;
            flex: 1;
        }
        
        .status-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            margin: 0 3px;
        }
        
        .status-success { background: #d4edda; color: #155724; }
        .status-error { background: #f8d7da; color: #721c24; }
        .status-warning { background: #fff3cd; color: #856404; }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: white;
            opacity: 0.8;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .content {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .nav a {
                display: block;
                margin: 5px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ” è®¤è¯ API æ–‡æ¡£</h1>
            <p>åŸç‰‡ç®¡ç†ç³»ç»Ÿ - ç”¨æˆ·è®¤è¯ä¸ä»¤ç‰Œç®¡ç†æ¥å£</p>
        </div>
        
        <div class="nav">
            <a href="index.html">ğŸ  é¦–é¡µ</a>
            <a href="auth.html" style="background: rgba(255,255,255,0.4);">ğŸ” è®¤è¯</a>
            <a href="scan.html">ğŸ“± æ‰«ç </a>
            <a href="packages.html">ğŸ“¦ åŒ…ç®¡ç†</a>
            <a href="racks.html">ğŸ—ï¸ åº“ä½</a>
            <a href="dictionary.html">ğŸ“š å­—å…¸</a>
            <a href="inventory_check.html">ğŸ“Š ç›˜ç‚¹</a>
            <a href="apicommon.html">ğŸ”§ å·¥å…·ç±»</a>
        </div>
        
        <div class="content">
            <div class="section">
                <h2>ğŸ“‹ æ¦‚è¿°</h2>
                <div class="info-box">
                    <h4>ğŸ¯ ä¸»è¦åŠŸèƒ½</h4>
                    <ul>
                        <li><strong>ç”¨æˆ·ç™»å½•</strong>ï¼šéªŒè¯ç”¨æˆ·èº«ä»½å¹¶è¿”å›è®¿é—®ä»¤ç‰Œ</li>
                        <li><strong>ä»¤ç‰ŒéªŒè¯</strong>ï¼šæ£€æŸ¥ä»¤ç‰Œæœ‰æ•ˆæ€§å¹¶è·å–ç”¨æˆ·ä¿¡æ¯</li>
                        <li><strong>åº”ç”¨ä¿¡æ¯</strong>ï¼šæ— éœ€è®¤è¯è·å–åº”ç”¨åç§°å’Œç‰ˆæœ¬ä¿¡æ¯</li>
                        <li><strong>æ— ä¼šè¯è®¤è¯</strong>ï¼šåŸºäºä»¤ç‰Œçš„æ— çŠ¶æ€è®¤è¯æœºåˆ¶</li>
                        <li><strong>å®‰å…¨æ€§</strong>ï¼šå¯†ç å“ˆå¸Œå­˜å‚¨ï¼Œä»¤ç‰Œè¿‡æœŸæœºåˆ¶</li>
                    </ul>
                </div>
                
                <h3>ğŸ”§ åŸºç¡€ä¿¡æ¯</h3>
                <table class="param-table">
                    <tr>
                        <th>é¡¹ç›®</th>
                        <th>å€¼</th>
                    </tr>
                    <tr>
                        <td>æ–‡ä»¶è·¯å¾„</td>
                        <td><code>api/auth.php</code></td>
                    </tr>
                    <tr>
                        <td>Content-Type</td>
                        <td><code>application/json; charset=utf-8</code></td>
                    </tr>
                    <tr>
                        <td>è®¤è¯æ–¹å¼</td>
                        <td>Bearer Tokenï¼ˆBase64ç¼–ç ï¼‰</td>
                    </tr>
                    <tr>
                        <td>ä»¤ç‰Œæœ‰æ•ˆæœŸ</td>
                        <td>24å°æ—¶</td>
                    </tr>
                    <tr>
                        <td>å“åº”æ ¼å¼</td>
                        <td><code>ç»Ÿä¸€æ ¼å¼ (ApiCommon)</code></td>
                    </tr>
                    <tr>
                        <td>å·¥å…·ç±»</td>
                        <td><a href="apicommon.html" style="color: #667eea;">ApiCommon</a></td>
                    </tr>
                </table>
                
                <div style="background: #f0f8ff; padding: 15px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #4CAF50;">
                    <strong>ğŸ¯ ç»Ÿä¸€å“åº”æ ¼å¼ä¼˜åŠ¿ï¼š</strong>
                    <ul style="margin: 10px 0 0 20px; color: #2E7D32;">
                        <li>âœ… æ‰€æœ‰APIæ¥å£å“åº”æ ¼å¼ç»Ÿä¸€</li>
                        <li>ğŸ”’ é›†æˆç»Ÿä¸€çš„è®¤è¯éªŒè¯æœºåˆ¶</li>
                        <li>ğŸ› ï¸ å‡å°‘ä»£ç é‡å¤ï¼Œä¾¿äºç»´æŠ¤</li>
                        <li>ğŸ“± æ”¯æŒä¼šè¯å’ŒTokenåŒé‡è®¤è¯</li>
                        <li>ğŸš€ æ ‡å‡†åŒ–çš„é”™è¯¯å¤„ç†å’Œå“åº”å¤´è®¾ç½®</li>
                    </ul>
                </div>
                
                <h3>ğŸ” è¯·æ±‚å¤´è¦æ±‚</h3>
                <div class="code-block">
Content-Type: application/json
Authorization: Bearer {token}
                </div>
            </div>
            
            <div class="section">
                <h2>ğŸš€ API ç«¯ç‚¹</h2>
                
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method post">POST</span>
                        <div class="url">(æ ¹è·¯å¾„)</div>
                    </div>
                    <h4>ç”¨æˆ·ç™»å½•</h4>
                    <p>éªŒè¯ç”¨æˆ·èº«ä»½å¹¶è¿”å›è®¿é—®ä»¤ç‰Œã€‚</p>
                    
                    <h5>ğŸ“ è¯·æ±‚å‚æ•°</h5>
                    <div class="json-block">
{
  "username": "admin",
  "password": "password123"
}
                    </div>
                    
                    <h5>ğŸ“ å“åº”ç¤ºä¾‹</h5>
                    <div class="json-block">
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJ1c2VyX2lkIjoxLCJjcmVhdGVkX2F0IjoxNzAxMzAwMDAwLCJleHBpcmVzX2F0IjoxNzAxMzg0MDAwfQ==",
    "user": {
      "id": 1,
      "username": "admin",
      "name": "ç³»ç»Ÿç®¡ç†å‘˜",
      "role": "admin",
      "base_id": null
    }
  }
}
                    </div>
                </div>
                
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method get">GET</span>
                        <div class="url">?action=appname</div>
                    </div>
                    <h4>è·å–åº”ç”¨ä¿¡æ¯</h4>
                    <p>æ— éœ€è®¤è¯çš„åº”ç”¨ä¿¡æ¯è·å–æ¥å£ï¼Œè¿”å›åº”ç”¨åç§°å’Œç‰ˆæœ¬ä¿¡æ¯ã€‚</p>
                    
                    <h5>ğŸ“ è¯·æ±‚å‚æ•°</h5>
                    <table class="param-table">
                        <tr>
                            <th>å‚æ•°å</th>
                            <th>ç±»å‹</th>
                            <th>å¿…å¡«</th>
                            <th>æè¿°</th>
                        </tr>
                        <tr>
                            <td><code>action</code></td>
                            <td>string</td>
                            <td>å¦</td>
                            <td>å›ºå®šå€¼: <code>appname</code></td>
                        </tr>
                    </table>
                    
                    <h5>ğŸ“ å“åº”ç¤ºä¾‹</h5>
                    <div class="json-block">
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "app_name": "ç»ç’ƒä»“å‚¨ç®¡ç†ç³»ç»Ÿ",
    "version": "1.0.0",
    "description": "ç»ç’ƒä»“å‚¨ç®¡ç†ç³»ç»Ÿ"
  },
  "timestamp": 1698758400
}
                    </div>
                    
                    <h5>ğŸ“‹ æ•°æ®æ¥æºè¯´æ˜</h5>
                    <div class="info-box">
                        <h4>æ•°æ®åº“å­˜å‚¨</h4>
                        <p>åº”ç”¨ä¿¡æ¯æ¥æºäºæ•°æ®åº“çš„ <code>settings</code> è¡¨ï¼š</p>
                        <table class="param-table">
                            <tr>
                                <th>è®¾ç½®é”®</th>
                                <th>æè¿°</th>
                                <th>é»˜è®¤å€¼</th>
                            </tr>
                            <tr>
                                <td><code>system_name</code></td>
                                <td>åº”ç”¨åç§°</td>
                                <td>"ç»ç’ƒä»“å‚¨ç®¡ç†ç³»ç»Ÿ"</td>
                            </tr>
                            <tr>
                                <td><code>system_version</code></td>
                                <td>åº”ç”¨ç‰ˆæœ¬</td>
                                <td>"1.0.0"</td>
                            </tr>
                        </table>
                    </div>
                </div>
                
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method get">GET</span>
                        <div class="url">(æ ¹è·¯å¾„)</div>
                    </div>
                    <h4>æ£€æŸ¥ç™»å½•çŠ¶æ€</h4>
                    <p>éªŒè¯ä»¤ç‰Œæœ‰æ•ˆæ€§å¹¶è¿”å›å½“å‰ç”¨æˆ·ä¿¡æ¯ã€‚</p>
                    
                    <h5>ğŸ“ å“åº”ç¤ºä¾‹</h5>
                    <div class="json-block">
{
  "code": 200,
  "message": "ç”¨æˆ·å·²ç™»å½•",
  "data": {
    "user": {
      "id": 1,
      "username": "admin",
      "name": "ç³»ç»Ÿç®¡ç†å‘˜",
      "role": "admin",
      "base_id": null
    }
  }
}
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>âŒ é”™è¯¯å“åº”</h2>
                <div class="error-box">
                    <h4>ğŸ“‹ ç»Ÿä¸€é”™è¯¯æ ¼å¼</h4>
                    <p>æ‰€æœ‰é”™è¯¯å“åº”éƒ½éµå¾ªç»Ÿä¸€æ ¼å¼ï¼š</p>
                    <div class="json-block">
{
  "code": 400,
  "message": "é”™è¯¯æè¿°",
  "timestamp": 1701300000
}
                    </div>
                </div>
                
                <h3>ğŸ”¢ å¸¸è§é”™è¯¯ç </h3>
                <table class="param-table">
                    <tr>
                        <th>çŠ¶æ€ç </th>
                        <th>è¯´æ˜</th>
                    </tr>
                    <tr>
                        <td><span class="status-badge status-warning">400</span></td>
                        <td>è¯·æ±‚å‚æ•°é”™è¯¯æˆ–ç¼ºå¤±</td>
                    </tr>
                    <tr>
                        <td><span class="status-badge status-error">401</span></td>
                        <td>ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯</td>
                    </tr>
                    <tr>
                        <td><span class="status-badge status-error">401</span></td>
                        <td>ä»¤ç‰Œæ— æ•ˆæˆ–å·²è¿‡æœŸ</td>
                    </tr>
                    <tr>
                        <td><span class="status-badge status-warning">404</span></td>
                        <td>ç”¨æˆ·ä¸å­˜åœ¨</td>
                    </tr>
                    <tr>
                        <td><span class="status-badge status-error">405</span></td>
                        <td>HTTPæ–¹æ³•ä¸å…è®¸</td>
                    </tr>
                </table>
            </div>
            
            <div class="section">
                <h2>ğŸ”„ æ•°æ®æºå˜æ›´</h2>
                <div class="info-box">
                    <h4>ğŸ¯ é‡è¦æ›´æ–° (v2.1)</h4>
                    <p>ä» v2.1 å¼€å§‹ï¼Œåº”ç”¨åç§°å’Œç‰ˆæœ¬ä¿¡æ¯å·²ä»é…ç½®æ–‡ä»¶å¸¸é‡è¿ç§»åˆ°æ•°æ®åº“å­˜å‚¨ã€‚</p>
                    
                    <h5>ğŸ“‹ å˜æ›´å†…å®¹</h5>
                    <ul>
                        <li><span class="status-badge status-error">åˆ é™¤</span> <code>config.php</code> ä¸­çš„ <code>APP_NAME</code> å’Œ <code>APP_VERSION</code> å¸¸é‡</li>
                        <li><span class="status-badge status-success">æ–°å¢</span> æ•°æ®åº“ <code>settings</code> è¡¨å­˜å‚¨åº”ç”¨ä¿¡æ¯</li>
                        <li><span class="status-badge status-success">æ–°å¢</span> æ‰€æœ‰é¡µé¢é€šè¿‡å‡½æ•°åŠ¨æ€è·å–åº”ç”¨ä¿¡æ¯</li>
                        <li><span class="status-badge status-success">æ–°å¢</span> æ”¯æŒç®¡ç†å‘˜åœ¨åå°åŠ¨æ€ä¿®æ”¹åº”ç”¨åç§°å’Œç‰ˆæœ¬</li>
                    </ul>
                    
                    <h5>ğŸ”§ è·å–æ–¹å¼</h5>
                    <div class="json-block">
// è·å–åº”ç”¨åç§°
$appName = getAppName();

// è·å–åº”ç”¨ç‰ˆæœ¬
$appVersion = getAppVersion();

// è·å–å®Œæ•´ä¿¡æ¯
$appInfo = getAppInfo();
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>ğŸ”‘ ä»¤ç‰Œæœºåˆ¶</h2>
                
                <h3>ğŸ·ï¸ ä»¤ç‰Œç»“æ„</h3>
                <div class="info-box">
                    <h4>ğŸ“‹ ä»¤ç‰Œæ•°æ®æ ¼å¼</h4>
                    <p>ä»¤ç‰Œä½¿ç”¨Base64ç¼–ç ï¼ŒåŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
                    <div class="json-block">
{
  "user_id": 1,
  "created_at": 1701300000,
  "expires_at": 1701386400
}
                    </div>
                </div>
                
                <h3>â° ä»¤ç‰Œç”Ÿå‘½å‘¨æœŸ</h3>
                <table class="param-table">
                    <tr>
                        <th>é˜¶æ®µ</th>
                        <th>æ—¶é—´</th>
                        <th>è¯´æ˜</th>
                    </tr>
                    <tr>
                        <td>åˆ›å»º</td>
                        <td>ç™»å½•æ—¶</td>
                        <td>ç”ŸæˆåŒ…å«ç”¨æˆ·IDå’Œè¿‡æœŸæ—¶é—´çš„ä»¤ç‰Œ</td>
                    </tr>
                    <tr>
                        <td>æœ‰æ•ˆæœŸ</td>
                        <td>24å°æ—¶</td>
                        <td>ä»¤ç‰Œä»åˆ›å»ºèµ·24å°æ—¶å†…æœ‰æ•ˆ</td>
                    </tr>
                    <tr>
                        <td>è¿‡æœŸ</td>
                        <td>24å°æ—¶å</td>
                        <td>ä»¤ç‰Œè‡ªåŠ¨å¤±æ•ˆï¼Œéœ€è¦é‡æ–°ç™»å½•</td>
                    </tr>
                </table>
                
                <h3>ğŸ”’ å®‰å…¨ç‰¹æ€§</h3>
                <div class="warning-box">
                    <h4>âš ï¸ å®‰å…¨æé†’</h4>
                    <ul>
                        <li><strong>å¯†ç å“ˆå¸Œ</strong>ï¼šä½¿ç”¨PHPçš„<code>password_hash()</code>å­˜å‚¨å¯†ç </li>
                        <li><strong>ä»¤ç‰Œè¿‡æœŸ</strong>ï¼šä»¤ç‰ŒåŒ…å«è¿‡æœŸæ—¶é—´ï¼Œè‡ªåŠ¨å¤±æ•ˆ</li>
                        <li><strong>Base64ç¼–ç </strong>ï¼šç®€å•ç¼–ç ï¼ŒéåŠ å¯†ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨JWTï¼‰</li>
                        <li><strong>æ— çŠ¶æ€</strong>ï¼šä¸ä¾èµ–æœåŠ¡ç«¯ä¼šè¯å­˜å‚¨</li>
                    </ul>
                </div>
            </div>
            
            <div class="section">
                <h2>ğŸ’» æ ¸å¿ƒå‡½æ•°</h2>
                
                <div class="endpoint">
                    <h4>ğŸ” validateLogin($username, $password)</h4>
                    <p>éªŒè¯ç”¨æˆ·ç™»å½•å‡­æ®ï¼Œè¿”å›ç”¨æˆ·ä¿¡æ¯æˆ–falseã€‚</p>
                    <div class="code-block">
$user = validateLogin($username, $password);
if ($user) {
    // ç™»å½•æˆåŠŸ
    $token = generateApiToken($user['id']);
}
                    </div>
                </div>
                
                <div class="endpoint">
                    <h4>ğŸ« generateApiToken($userId)</h4>
                    <p>ä¸ºæŒ‡å®šç”¨æˆ·ç”ŸæˆAPIè®¿é—®ä»¤ç‰Œã€‚</p>
                    <div class="code-block">
$token = generateApiToken($userId);
// è¿”å›: eyJ1c2VyX2lkIjoxLCJjcmVhdGVkX2F0IjoxNzAxMzAwMDAwLCJleHBpcmVzX2F0IjoxNzAxMzg0MDAwfQ==
                    </div>
                </div>
                
                <div class="endpoint">
                    <h4>âœ… validateApiToken($token)</h4>
                    <p>éªŒè¯ä»¤ç‰Œæœ‰æ•ˆæ€§ï¼Œè¿”å›ç”¨æˆ·IDæˆ–falseã€‚</p>
                    <div class="code-block">
$userId = validateApiToken($token);
if ($userId) {
    // ä»¤ç‰Œæœ‰æ•ˆ
    $user = fetchRow("SELECT * FROM users WHERE id = ?", [$userId]);
}
                    </div>
                </div>
                
                <div class="endpoint">
                    <h4>ğŸ“¥ getBearerToken()</h4>
                    <p>ä»HTTPè¯·æ±‚å¤´ä¸­æå–Bearerä»¤ç‰Œã€‚</p>
                    <div class="code-block">
$token = getBearerToken();
// ä» Authorization: Bearer {token} ä¸­æå–
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹</h2>
                
                <h3>ğŸ“± JavaScript ç™»å½•ç¤ºä¾‹</h3>
                <div class="code-block">
// ç”¨æˆ·ç™»å½•
async function login(username, password) {
    const response = await fetch('/api/auth.php', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            username: username,
            password: password
        })
    });
    
    const result = await response.json();
    if (result.code === 200) {
        // ä¿å­˜ä»¤ç‰Œ
        localStorage.setItem('token', result.data.token);
        localStorage.setItem('user', JSON.stringify(result.data.user));
        return result.data;
    } else {
        throw new Error(result.message);
    }
}

// ä½¿ç”¨ä»¤ç‰Œè®¿é—®å…¶ä»–API
async function callApi(url, options = {}) {
    const token = localStorage.getItem('token');
    const defaultOptions = {
        headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${token}`
        }
    };
    
    const response = await fetch(url, {
        ...defaultOptions,
        ...options,
        headers: {
            ...defaultOptions.headers,
            ...options.headers
        }
    });
    
    return await response.json();
}
                    </div>
                
                <h3>ğŸ˜ PHP è°ƒç”¨ç¤ºä¾‹</h3>
                <div class="code-block">
// ç™»å½•å¹¶è·å–ä»¤ç‰Œ
$ch = curl_init();
curl_setopt_array($ch, [
    CURLOPT_URL => 'http://example.com/api/auth.php',
    CURLOPT_POST => true,
    CURLOPT_POSTFIELDS => json_encode([
        'username' => 'admin',
        'password' => 'password123'
    ]),
    CURLOPT_HTTPHEADER => [
        'Content-Type: application/json'
    ],
    CURLOPT_RETURNTRANSFER => true
]);

$result = curl_exec($ch);
$data = json_decode($result, true);

if ($data['code'] === 200) {
    $token = $data['data']['token'];
    $user = $data['data']['user'];
    
    // ä½¿ç”¨ä»¤ç‰Œè°ƒç”¨å…¶ä»–API
    $apiCh = curl_init();
    curl_setopt_array($apiCh, [
        CURLOPT_URL => 'http://example.com/api/inventory_check.php?action=list',
        CURLOPT_HTTPHEADER => [
            'Authorization: Bearer ' . $token,
            'Content-Type: application/json'
        ],
        CURLOPT_RETURNTRANSFER => true
    ]);
    
    $apiResult = curl_exec($apiCh);
    $apiData = json_decode($apiResult, true);
}
                    </div>
            </div>
            
            <div class="section">
                <h2>ğŸ“ æ³¨æ„äº‹é¡¹</h2>
                <div class="warning-box">
                    <h4>âš ï¸ é‡è¦æé†’</h4>
                    <ul>
                        <li><strong>ä»¤ç‰Œå®‰å…¨</strong>ï¼šä»¤ç‰Œåº”å¦¥å–„å­˜å‚¨ï¼Œé¿å…æ³„éœ²</li>
                        <li><strong>HTTPS</strong>ï¼šç”Ÿäº§ç¯å¢ƒåº”ä½¿ç”¨HTTPSä¼ è¾“</li>
                        <li><strong>å¯†ç å¼ºåº¦</strong>ï¼šå»ºè®®ä½¿ç”¨å¼ºå¯†ç ç­–ç•¥</li>
                        <li><strong>ä»¤ç‰Œåˆ·æ–°</strong>ï¼šè€ƒè™‘å®ç°ä»¤ç‰Œè‡ªåŠ¨åˆ·æ–°æœºåˆ¶</li>
                        <li><strong>JWTæ›¿ä»£</strong>ï¼šç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨JWTæ›¿ä»£ç®€å•Base64ç¼–ç </li>
                        <li><strong>é”™è¯¯å¤„ç†</strong>ï¼šå®¢æˆ·ç«¯åº”æ­£ç¡®å¤„ç†å„ç§é”™è¯¯çŠ¶æ€</li>
                    </ul>
                </div>
                
                <h3>ğŸ“š ç‰ˆæœ¬å†å²</h3>
                <table class="param-table">
                    <tr>
                        <th>ç‰ˆæœ¬</th>
                        <th>æ—¥æœŸ</th>
                        <th>æ›´æ–°å†…å®¹</th>
                    </tr>
                    <tr>
                        <td><span class="status-badge status-success">v1.0</span></td>
                        <td>2024-11-30</td>
                        <td>åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºç¡€ç™»å½•å’Œä»¤ç‰ŒéªŒè¯åŠŸèƒ½</td>
                    </tr>
                    <tr>
                        <td><span class="status-badge status-success">v1.1</span></td>
                        <td>è®¡åˆ’ä¸­</td>
                        <td>å¢å¼ºä»¤ç‰Œæœºåˆ¶ï¼Œæ”¯æŒJWTå’Œåˆ·æ–°ä»¤ç‰Œ</td>
                    </tr>
                </table>
            </div>
        </div>
        
        <div class="footer">
            <p>ğŸ” åŸç‰‡ç®¡ç†ç³»ç»Ÿ - è®¤è¯ API æ–‡æ¡£</p>
            <p>æœ€åæ›´æ–°æ—¶é—´: 2024-11-30</p>
        </div>
    </div>
</body>
</html>